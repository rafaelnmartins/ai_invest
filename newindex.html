<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stockgaide - An√°lise Inteligente de A√ß√µes</title>
  <meta name="description" content="Plataforma profissional de an√°lise t√©cnica com IA, alertas em tempo real e gest√£o de portf√≥lio." />
  <link rel="preconnect" href="https://s3.tradingview.com" crossorigin>
  <style>
    /* =========================
       Theme variables (DARK dashboard look)
       ========================= */
    :root{
      --page-bg: #050814;
      --panel: #0b1220;
      --panel-2:#0f172a;
      --muted: #9aa8bd;
      --ink: #e7edf6;

      --accent: #38bdf8;
      --accent-2: #6366f1;
      --primary: #3b82f6;
      --secondary: #8b5cf6;

      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --neutral: #64748b;

      --radius: 14px;
      --card-border: rgba(255,255,255,0.08);
      --shadow-1: 0 18px 44px rgba(0,0,0,0.55);
      --max-width: 1400px;

      --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:
        radial-gradient(1200px 650px at 18% -10%, rgba(56,189,248,0.10), transparent 60%),
        radial-gradient(1000px 550px at 90% 0%, rgba(99,102,241,0.10), transparent 60%),
        radial-gradient(900px 600px at 40% 110%, rgba(56,189,248,0.06), transparent 60%),
        var(--page-bg);
      color:var(--ink);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.5;
      -webkit-tap-highlight-color: transparent;
    }

    /* Skeleton loader */
    @keyframes shimmer {
      0% { background-position: -1000px 0; }
      100% { background-position: 1000px 0; }
    }

    .skeleton {
      animation: shimmer 2s infinite linear;
      background: linear-gradient(90deg, rgba(255,255,255,0.05) 25%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.05) 75%);
      background-size: 1000px 100%;
      border-radius: 8px;
      height: 20px;
      margin: 8px 0;
    }

    /* Pulse animation */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    .pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }

    /* Toast notifications */
    .toast-container {
      position: fixed;
      top: 80px;
      right: 20px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-width: 400px;
    }

    .toast {
      background: linear-gradient(180deg, rgba(15,23,42,0.98), rgba(11,18,32,0.98));
      border: 1px solid var(--card-border);
      border-radius: 12px;
      padding: 16px 20px;
      box-shadow: var(--shadow-1);
      display: flex;
      align-items: center;
      gap: 12px;
      transform: translateX(400px);
      animation: slideIn 0.3s ease forwards;
    }

    @keyframes slideIn {
      to { transform: translateX(0); }
    }

    @keyframes slideOut {
      to { transform: translateX(400px); opacity: 0; }
    }

    .toast.removing { animation: slideOut 0.3s ease forwards; }

    .toast.success { border-left: 4px solid var(--success); }
    .toast.error { border-left: 4px solid var(--danger); }
    .toast.info { border-left: 4px solid var(--primary); }

    .toast-icon {
      font-size: 24px;
      flex-shrink: 0;
    }

    .toast-content {
      flex: 1;
    }

    .toast-title {
      font-weight: 700;
      margin-bottom: 4px;
    }

    .toast-message {
      font-size: 13px;
      color: var(--muted);
    }

    a{color:var(--accent);text-decoration:none}
    .wrap{max-width:var(--max-width);margin:0 auto;padding:0}

    /* Disclaimer banner */
    .disclaimer-banner {
      background: linear-gradient(90deg, rgba(239,68,68,0.15), rgba(245,158,11,0.15));
      border-bottom: 1px solid rgba(239,68,68,0.3);
      padding: 12px 20px;
      text-align: center;
      font-size: 13px;
      color: var(--ink);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    /* Header */
    header{
      background: linear-gradient(180deg, rgba(15,23,42,0.95), rgba(15,23,42,0.85));
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--card-border);
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .header-content {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
    }

    .brand{display:flex;gap:14px;align-items:center}

    .logo{
      width:48px;height:48px;border-radius:12px;
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      box-shadow: 0 8px 24px rgba(56,189,248,0.3);
      display:flex;align-items:center;justify-content:center;
      color:#06111f;font-weight:900;
      font-family:monospace;font-size:16px;
      transition: var(--transition);
    }

    .logo:hover {
      transform: scale(1.05);
      box-shadow: 0 12px 32px rgba(56,189,248,0.4);
    }

    .brand-name .ai{
      color: var(--accent);
      font-weight: 900;
      text-shadow: 0 0 18px rgba(56,189,248,0.25);
    }

    h1{font-size:clamp(16px,2.2vw,22px);margin:0;letter-spacing:-0.3px;font-weight:800}
    .header-meta{color:var(--muted);font-size:12px;margin-top:2px}

    .header-actions {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    /* Tabs navigation */
    .tabs-nav {
      background: rgba(15,23,42,0.6);
      border-bottom: 1px solid var(--card-border);
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    .tabs-nav::-webkit-scrollbar { height: 4px; }
    .tabs-nav::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); }
    .tabs-nav::-webkit-scrollbar-thumb { background: rgba(56,189,248,0.3); border-radius: 2px; }

    .tabs-container {
      max-width: var(--max-width);
      margin: 0 auto;
      display: flex;
      gap: 0;
      padding: 0 20px;
    }

    .tab-btn {
      background: transparent;
      border: none;
      border-bottom: 3px solid transparent;
      color: var(--muted);
      padding: 16px 24px;
      font-weight: 700;
      font-size: 14px;
      cursor: pointer;
      transition: var(--transition);
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .tab-btn:hover {
      color: var(--ink);
      background: rgba(56,189,248,0.05);
    }

    .tab-btn.active {
      color: var(--accent);
      border-bottom-color: var(--accent);
      background: rgba(56,189,248,0.08);
    }

    .tab-content {
      display: none;
      padding: 24px 20px;
      max-width: var(--max-width);
      margin: 0 auto;
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Cards */
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:20px}

    .card{
      background: linear-gradient(180deg, rgba(15,23,42,0.92), rgba(11,18,32,0.92));
      border:1px solid var(--card-border);
      border-radius:var(--radius);
      padding:24px;
      box-shadow:var(--shadow-1);
      transition: var(--transition);
    }

    .card:hover {
      border-color: rgba(56,189,248,0.15);
      box-shadow: 0 20px 50px rgba(0,0,0,0.65);
    }

    .card-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .card-title {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .card h2{margin:0;font-size:20px;font-weight:800}
    .card h3{margin:0;font-size:16px;color:var(--ink);font-weight:700}
    .card-subtitle{color:var(--muted);font-size:13px;margin-top:4px}
    p{color:var(--muted);margin:8px 0}
    .muted{color:var(--muted);font-size:13px}
    .muted-small{color:var(--muted);font-size:12px}

    /* Hero section */
    .hero-section {
      background: linear-gradient(135deg, rgba(56,189,248,0.15), rgba(99,102,241,0.15));
      border: 1px solid rgba(56,189,248,0.25);
      border-radius: var(--radius);
      padding: 32px;
      margin-bottom: 24px;
      text-align: center;
    }

    .hero-title {
      font-size: 28px;
      font-weight: 900;
      margin: 0 0 12px 0;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero-subtitle {
      color: var(--muted);
      font-size: 15px;
      margin-bottom: 24px;
    }

    .hero-input-group {
      display: flex;
      gap: 12px;
      max-width: 600px;
      margin: 0 auto;
      align-items: stretch;
    }

    .hero-input-group input {
      flex: 1;
      min-height: 54px;
      font-size: 16px;
      font-weight: 600;
      text-align: center;
    }

    .hero-input-group .btn {
      min-height: 54px;
      padding: 0 32px;
      font-size: 16px;
    }

    /* Stats cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .stat-card {
      background: linear-gradient(180deg, rgba(30,41,59,0.65), rgba(2,6,23,0.55));
      border: 1px solid var(--card-border);
      border-radius: 12px;
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      transition: var(--transition);
    }

    .stat-card:hover {
      border-color: rgba(56,189,248,0.25);
      transform: translateY(-2px);
    }

    .stat-icon {
      width: 48px;
      height: 48px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      flex-shrink: 0;
    }

    .stat-icon.success { background: rgba(16,185,129,0.15); }
    .stat-icon.danger { background: rgba(239,68,68,0.15); }
    .stat-icon.primary { background: rgba(59,130,246,0.15); }
    .stat-icon.warning { background: rgba(245,158,11,0.15); }

    .stat-content {
      flex: 1;
    }

    .stat-label {
      font-size: 12px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 24px;
      font-weight: 900;
      line-height: 1;
    }

    .stat-change {
      font-size: 12px;
      margin-top: 4px;
    }

    /* Buttons */
    .btn{
      cursor:pointer;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.10);
      background: linear-gradient(180deg, rgba(30,41,59,0.85), rgba(2,6,23,0.92));
      padding:12px 20px;
      font-weight:700;
      font-size:14px;
      color:var(--ink);
      box-shadow: 0 10px 26px rgba(0,0,0,0.35);
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      min-height: 44px;
      justify-content: center;
    }

    .btn:hover{
      border-color: rgba(56,189,248,0.35);
      box-shadow: 0 12px 32px rgba(56,189,248,0.15), 0 10px 26px rgba(0,0,0,0.35);
      transform: translateY(-1px);
    }

    .btn:active{transform:translateY(0)}

    .btn.primary {
      background: linear-gradient(135deg, var(--primary), var(--accent));
      border-color: var(--primary);
      box-shadow: 0 10px 26px rgba(59,130,246,0.35);
    }

    .btn.primary:hover {
      box-shadow: 0 12px 32px rgba(59,130,246,0.45);
    }

    .btn.ghost{
      background: transparent;
      border:1px solid rgba(255,255,255,0.16);
      box-shadow: none;
    }

    .btn.ghost:hover {
      background: rgba(56,189,248,0.05);
    }

    .btn.small{padding:10px 16px;font-size:13px;border-radius:10px;min-height:40px}

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }

    .btn.loading::after {
      content: '';
      width: 14px;
      height: 14px;
      border: 2px solid currentColor;
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Form controls */
    input,select,textarea{
      font:inherit;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(2,6,23,0.75);
      color:var(--ink);
      padding:12px 16px;
      min-height:48px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.04);
      transition: var(--transition);
      width: 100%;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(56,189,248,0.15);
    }

    input::placeholder{color:#7f8ba3}

    input.error {
      border-color: var(--danger);
      box-shadow: 0 0 0 3px rgba(239,68,68,0.15);
    }

    .input-group {
      display: flex;
      gap: 12px;
      align-items: stretch;
    }

    .input-group input {
      flex: 1;
    }

    /* Badges */
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      font-weight:800;
      border-radius:999px;
      padding:6px 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .badge.primary {
      color:#bfe9ff;
      background: rgba(56,189,248,0.14);
      border:1px solid rgba(56,189,248,0.32);
    }

    .badge.success {
      color:#86efac;
      background: rgba(16,185,129,0.14);
      border:1px solid rgba(16,185,129,0.32);
    }

    .badge.danger {
      color:#fca5a5;
      background: rgba(239,68,68,0.14);
      border:1px solid rgba(239,68,68,0.32);
    }

    .badge.warning {
      color:#fcd34d;
      background: rgba(245,158,11,0.14);
      border:1px solid rgba(245,158,11,0.32);
    }

    /* Tables */
    .table-wrap{
      overflow:auto;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.08);
      background: rgba(2,6,23,0.35);
    }

    table{width:100%;border-collapse:collapse;min-width:680px}
    th,td{padding:16px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.06)}
    th{
      font-size:12px;
      color:#c7d2fe;
      font-weight:800;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      background: linear-gradient(180deg, rgba(30,41,59,0.65), rgba(2,6,23,0.55));
    }

    tbody tr {
      transition: var(--transition);
    }

    tbody tr:hover{
      background: rgba(56,189,248,0.06);
    }

    .symbol-btn {
      background: transparent;
      border: 1px solid rgba(56,189,248,0.3);
      color: var(--accent);
      padding: 6px 12px;
      border-radius: 8px;
      font-weight: 700;
      font-size: 13px;
      cursor: pointer;
      transition: var(--transition);
    }

    .symbol-btn:hover {
      background: rgba(56,189,248,0.15);
      border-color: var(--accent);
    }

    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--muted);
    }

    .empty-icon {
      font-size: 64px;
      margin-bottom: 16px;
      opacity: 0.5;
    }

    .empty-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--ink);
      margin-bottom: 8px;
    }

    .empty-message {
      font-size: 14px;
      margin-bottom: 24px;
    }

    /* Charts */
    iframe{
      width:100%;
      height:520px;
      border:1px solid var(--card-border);
      border-radius:12px;
      box-shadow:0 16px 34px rgba(0,0,0,0.45);
      background: rgba(2,6,23,0.45);
    }

    #tradingview_chart{
      height:520px;
      width:100%;
      border-radius:12px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,0.08);
      background: linear-gradient(180deg, rgba(15,23,42,0.70), rgba(2,6,23,0.70));
      display:flex;align-items:center;justify-content:center;position:relative;
      box-shadow:0 18px 44px rgba(0,0,0,0.55);
    }

    .chart-topbar{
      position:absolute;
      left:12px;
      top:12px;
      padding:8px 14px;
      border-radius:999px;
      font-size:13px;
      font-weight: 700;
      background: rgba(2,6,23,0.75);
      backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,0.12);
      color: var(--ink);
      z-index: 10;
    }

    /* Tips list */
    .tips{padding-left:20px;margin:16px 0}
    .tips li{margin:10px 0;color:var(--ink);line-height:1.6}
    .tips .highlight {
      color: var(--accent);
      font-weight: 800;
    }

    /* Checklist */
    .checklist {
      list-style: none;
      padding: 0;
      margin: 16px 0;
    }

    .checklist li {
      padding: 10px 0;
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }

    .checklist li:last-child {
      border-bottom: none;
    }

    .checklist li::before {
      content: '‚ñ°';
      font-size: 20px;
      color: var(--muted);
    }

    /* Progress bar */
    .progress-bar {
      height: 8px;
      background: rgba(255,255,255,0.05);
      border-radius: 999px;
      overflow: hidden;
      margin: 12px 0;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      border-radius: 999px;
      transition: width 0.6s ease;
    }

    /* Methodology */
    .methodology-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
      margin-top: 20px;
    }

    .method-item {
      background: rgba(30,41,59,0.35);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 10px;
      padding: 16px;
      text-align: center;
    }

    .method-icon {
      font-size: 32px;
      margin-bottom: 8px;
    }

    .method-label {
      font-size: 12px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .method-value {
      font-size: 18px;
      font-weight: 800;
      color: var(--ink);
      margin-top: 4px;
    }

    code{
      background: rgba(2,6,23,0.70);
      border:1px solid rgba(255,255,255,0.10);
      padding:3px 8px;
      border-radius:6px;
      font-size:12px;
      color:#c7d2fe;
      font-family: 'Courier New', monospace;
    }

    footer{
      margin:40px 0 20px 0;
      text-align:center;
      color:var(--muted);
      font-size:12px;
      padding: 20px;
      border-top: 1px solid var(--card-border);
    }

    /* Responsive */
    @media (max-width: 960px) {
      .header-content { flex-direction: column; align-items: stretch; }
      .brand { justify-content: center; }
      .header-actions { justify-content: center; flex-wrap: wrap; }
      
      .tabs-nav { overflow-x: auto; }
      .tab-btn { padding: 14px 20px; font-size: 13px; }
      
      .grid { grid-template-columns: 1fr !important; }
      .hero-input-group { flex-direction: column; }
      .stats-grid { grid-template-columns: 1fr; }
      
      .card { padding: 18px; }
      .card-header { flex-direction: column; align-items: flex-start; }
      
      #tradingview_chart, iframe { height: 360px; }
      
      .table-wrap table { min-width: unset; display: block; }
      .table-wrap thead { display: none; }
      .table-wrap tbody { display: block; }
      .table-wrap tbody tr {
        display: block;
        margin: 12px 0;
        border: 1px solid rgba(255,255,255,0.10);
        border-radius: 12px;
        padding: 16px;
        background: linear-gradient(180deg, rgba(15,23,42,0.88), rgba(2,6,23,0.85));
      }
      .table-wrap tbody td {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 0;
      }
      .table-wrap tbody td::before {
        content: attr(data-label);
        font-weight: 800;
        color: var(--muted);
        font-size: 12px;
        text-transform: uppercase;
      }
    }

    @media (max-width: 420px) {
      .logo { width: 40px; height: 40px; font-size: 14px; }
      h1 { font-size: 16px; }
      .hero-title { font-size: 22px; }
      #tradingview_chart, iframe { height: 300px; }
      .stat-card { padding: 16px; }
      .stat-icon { width: 40px; height: 40px; font-size: 20px; }
      .stat-value { font-size: 20px; }
    }

    /* Utility classes */
    .text-success { color: var(--success); font-weight: 800; }
    .text-danger { color: var(--danger); font-weight: 800; }
    .text-warning { color: var(--warning); font-weight: 800; }
    .text-center { text-align: center; }
    .mt-1 { margin-top: 8px; }
    .mt-2 { margin-top: 16px; }
    .mt-3 { margin-top: 24px; }
    .mb-1 { margin-bottom: 8px; }
    .mb-2 { margin-bottom: 16px; }
    .mb-3 { margin-bottom: 24px; }
  </style>
</head>
<body>
  <!-- Toast container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Disclaimer banner -->
  <div class="disclaimer-banner">
    <span>‚ö†Ô∏è</span>
    <span id="disclaimerText">Conte√∫do educacional. N√£o constitui recomenda√ß√£o de investimento. Consulte um profissional certificado.</span>
  </div>

  <!-- Header -->
  <header>
    <div class="header-content">
      <div class="brand">
        <div class="logo" aria-label="Stockgaide Logo">AI</div>
        <div>
          <h1 class="brand-name">Stockg<span class="ai">ai</span>de</h1>
          <div class="header-meta" id="headerSubtitle">An√°lise inteligente de a√ß√µes com IA</div>
        </div>
      </div>

      <div class="header-actions">
        <button id="langToggle" class="btn small" title="Alternar idioma">
          <span id="langIcon">üáßüá∑</span>
          <span id="langLabel">PT</span>
        </button>
      </div>
    </div>

    <!-- Tabs navigation -->
    <nav class="tabs-nav">
      <div class="tabs-container">
        <button class="tab-btn active" data-tab="dashboard">
          <span>üìä</span>
          <span id="tabDashboard">Dashboard</span>
        </button>
        <button class="tab-btn" data-tab="analysis">
          <span>üìà</span>
          <span id="tabAnalysis">An√°lise</span>
        </button>
        <button class="tab-btn" data-tab="portfolio">
          <span>üíº</span>
          <span id="tabPortfolio">Portf√≥lio</span>
        </button>
        <button class="tab-btn" data-tab="charts">
          <span>üìâ</span>
          <span id="tabCharts">Gr√°ficos</span>
        </button>
      </div>
    </nav>
  </header>

  <div class="wrap">
    <!-- TAB: DASHBOARD -->
    <div class="tab-content active" data-content="dashboard">
      <!-- Stats cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon success">üí∞</div>
          <div class="stat-content">
            <div class="stat-label" id="statPortfolioLabel">Portf√≥lio</div>
            <div class="stat-value" id="statPortfolioValue">‚Äî</div>
            <div class="stat-change" id="statPortfolioChange"></div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon primary">üìä</div>
          <div class="stat-content">
            <div class="stat-label" id="statPositionsLabel">Posi√ß√µes</div>
            <div class="stat-value" id="statPositionsValue">0</div>
            <div class="stat-change" id="statPositionsChange"></div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon success">‚úì</div>
          <div class="stat-content">
            <div class="stat-label" id="statWinnersLabel">Ganhadoras</div>
            <div class="stat-value" id="statWinnersValue">0</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon danger">‚ö†</div>
          <div class="stat-content">
            <div class="stat-label" id="statRiskLabel">Em Risco</div>
            <div class="stat-value" id="statRiskValue">0</div>
          </div>
        </div>
      </div>

      <!-- Quick tips -->
      <div class="card">
        <div class="card-header">
          <div>
            <h2 id="quickTipsTitle">Dicas R√°pidas</h2>
            <div class="card-subtitle" id="quickTipsSubtitle">Resumo pr√°tico para uso di√°rio</div>
          </div>
          <div class="muted-small">
            <span id="lastReadLabel">√öltima leitura:</span> 
            <strong id="lastRefreshTop">‚Äî</strong>
          </div>
        </div>

        <ul class="tips">
          <li id="tip1">üéØ Ganho esperado: <span class="highlight">+5%</span> (curto prazo) | <span class="highlight">+10%</span> (longo prazo)</li>
          <li id="tip2">‚è∞ Alertas enviados: <span class="highlight">ap√≥s fechamento</span> de Wall Street</li>
          <li id="tip3">üõ°Ô∏è Sempre defina <span class="highlight">stop loss</span> antes de operar</li>
          <li id="tip4">üìà Confirme sinais com <span class="highlight">2-3 indicadores</span> t√©cnicos</li>
        </ul>
      </div>

      <!-- Methodology -->
      <div class="card mt-3">
        <div class="card-header">
          <div>
            <h2 id="methodologyTitle">Como Funciona</h2>
            <div class="card-subtitle" id="methodologySubtitle">Nossa metodologia de an√°lise</div>
          </div>
        </div>

        <div class="methodology-grid">
          <div class="method-item">
            <div class="method-icon">üìä</div>
            <div class="method-label" id="methodIndicators">Indicadores</div>
            <div class="method-value">15+</div>
          </div>
          <div class="method-item">
            <div class="method-icon">üë•</div>
            <div class="method-label" id="methodAnalysts">Analistas</div>
            <div class="method-value">20+</div>
          </div>
          <div class="method-item">
            <div class="method-icon">‚ö°</div>
            <div class="method-label" id="methodUpdate">Atualiza√ß√£o</div>
            <div class="method-value" id="methodUpdateValue">Tempo real</div>
          </div>
          <div class="method-item">
            <div class="method-icon">üéØ</div>
            <div class="method-label" id="methodAccuracy">Precis√£o</div>
            <div class="method-value">68%</div>
          </div>
        </div>
      </div>

      <!-- Market overview ticker -->
      <div class="card mt-3">
        <div class="card-header">
          <div>
            <h2 id="marketTitle">Mercados Globais & Magnificent 7</h2>
            <div class="card-subtitle" id="marketSubtitle">Acompanhe √≠ndices e mega-cap tech</div>
          </div>
        </div>

        <div class="tradingview-widget-container">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
            {
              "symbols": [
                {"proName": "FOREXCOM:US30",  "title": "Dow Jones"},
                {"proName": "FOREXCOM:US100", "title": "Nasdaq 100"},
                {"proName": "FOREXCOM:US500", "title": "S&P 500"},
                {"proName": "BMFBOVESPA:IBOV", "title": "Ibovespa"},
                {"proName": "NASDAQ:AAPL",  "title": "Apple"},
                {"proName": "NASDAQ:MSFT",  "title": "Microsoft"},
                {"proName": "NASDAQ:GOOGL", "title": "Alphabet"},
                {"proName": "NASDAQ:AMZN",  "title": "Amazon"},
                {"proName": "NASDAQ:NVDA",  "title": "NVIDIA"},
                {"proName": "NASDAQ:META",  "title": "Meta"},
                {"proName": "NASDAQ:TSLA",  "title": "Tesla"}
              ],
              "showSymbolLogo": true,
              "isTransparent": false,
              "displayMode": "adaptive",
              "colorTheme": "light"
            }
          </script>
        </div>
      </div>
    </div>

    <!-- TAB: ANALYSIS -->
    <div class="tab-content" data-content="analysis">
      <!-- Hero section -->
      <div class="hero-section">
        <h2 class="hero-title" id="heroTitle">An√°lise T√©cnica Automatizada</h2>
        <p class="hero-subtitle" id="heroSubtitle">Combina√ß√£o de 15+ indicadores t√©cnicos + consenso de analistas</p>
        
        <div class="hero-input-group">
          <input 
            id="aiSymbolInput" 
            type="text"
            placeholder="Ex.: NASDAQ:AMZN ou AMZN" 
            aria-label="S√≠mbolo para an√°lise"
          />
          <button id="aiAnalyzeBtn" class="btn primary">
            <span id="analyzeText">Analisar</span>
          </button>
        </div>

        <div class="mt-2" style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
          <button id="aiUseChartBtn" class="btn small ghost">
            <span id="useChartText">Usar s√≠mbolo do gr√°fico</span>
          </button>
        </div>
      </div>

      <!-- Analysis result grid -->
      <div class="grid">
        <!-- Worker analysis result -->
        <div class="card" style="grid-column: span 7;">
          <div class="card-header">
            <div>
              <h3 id="analysisResultTitle">Resultado da An√°lise</h3>
              <div class="card-subtitle" id="analysisResultSubtitle">Calculado pelo nosso algoritmo propriet√°rio</div>
            </div>
          </div>

          <div id="aiResult">
            <div class="empty-state">
              <div class="empty-icon">üîç</div>
              <div class="empty-title" id="emptyAnalysisTitle">Nenhuma an√°lise ainda</div>
              <div class="empty-message" id="emptyAnalysisMessage">Digite um s√≠mbolo acima e clique em "Analisar"</div>
            </div>
          </div>

          <p class="status mt-2" id="aiStatus"></p>
        </div>

        <!-- Grok AI opinion -->
        <div class="card" style="grid-column: span 5; background: linear-gradient(180deg, rgba(30,41,59,0.55), rgba(2,6,23,0.55)); border: 1px solid rgba(250,204,21,0.22);">
          <div class="card-header">
            <div>
              <h3 id="grokTitle">Opini√£o Extra da IA (Grok)</h3>
              <div class="card-subtitle" id="grokSubtitle">Resumo conciso gerado pela LLM</div>
            </div>
            <span class="badge warning">ü§ñ AI</span>
          </div>

          <div id="grokOpinion" class="status" style="min-height: 120px; line-height: 1.8;">‚Äî</div>
        </div>
      </div>

      <!-- Alerts section -->
      <div class="card mt-3">
        <div class="card-header">
          <div>
            <h2 id="alertsTitle">Alertas do Agente</h2>
            <div class="card-subtitle" id="alertsSubtitle">Sinais autom√°ticos do Worker (Cloudflare)</div>
          </div>
          <span class="badge primary">‚ö° Agent</span>
        </div>

        <div style="border-radius: 12px; overflow: hidden;">
          <iframe
            src="https://shiny-sea-44d3.rafaelnm.workers.dev/"
            id="alertsFrame"
            title="Alertas ‚Äì Cloudflare Worker"
            loading="lazy"
            referrerpolicy="no-referrer"
            style="background:#fff;color:#000;height:400px;">
          </iframe>
        </div>

        <details class="mt-2">
          <summary class="muted-small" style="cursor: pointer;" id="alertsHelp">Se a janela n√£o aparecer</summary>
          <p class="muted-small mt-1" id="alertsHelpText">
            No Worker: remova <code>X-Frame-Options</code> e permita <code>frame-ancestors</code> no CSP (inclua seu dom√≠nio do GitHub Pages).
          </p>
        </details>
      </div>
    </div>

    <!-- TAB: PORTFOLIO -->
    <div class="tab-content" data-content="portfolio">
      <!-- Portfolio header with actions -->
      <div class="card">
        <div class="card-header">
          <div>
            <h2 id="portfolioTitle">Meu Portf√≥lio</h2>
            <div class="card-subtitle" id="portfolioSubtitle">Gerencie suas posi√ß√µes com c√°lculo de P/L em tempo real</div>
          </div>

          <div style="display: flex; gap: 12px; flex-wrap: wrap;">
            <span class="badge success" title="Posi√ß√µes vis√≠veis para todos">
              <span>üåê</span>
              <span id="publicBadge">P√∫blico</span>
            </span>
            <button id="loadPublicBtn" class="btn small">
              <span id="loadPublicText">Carregar p√∫blicas</span>
            </button>
            <button id="publishBtn" class="btn small" title="Enviar posi√ß√µes locais para o servidor (admin)">
              <span id="publishText">Publicar (admin)</span>
            </button>
          </div>
        </div>

        <!-- Add position form -->
        <div style="background: rgba(30,41,59,0.35); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; padding: 20px; margin-top: 20px;">
          <h3 id="addPositionTitle" style="margin: 0 0 16px 0; font-size: 16px;">Adicionar Nova Posi√ß√£o</h3>
          
          <div class="input-group mb-2">
            <input 
              id="posSymbol" 
              type="text"
              placeholder="Ex.: NASDAQ:NVDA ou BMFBOVESPA:PETR4" 
              aria-label="S√≠mbolo"
            />
          </div>

          <div class="input-group mb-2">
            <input 
              id="posAvg" 
              type="number" 
              inputmode="decimal" 
              step="0.01" 
              placeholder="Pre√ßo m√©dio" 
              aria-label="Pre√ßo m√©dio"
            />
            <input 
              id="posNote" 
              type="text"
              placeholder="Observa√ß√£o (opcional)" 
              aria-label="Observa√ß√£o"
            />
          </div>

          <div style="display: flex; gap: 12px; flex-wrap: wrap;">
            <button id="addPosBtn" class="btn primary">
              <span>‚ûï</span>
              <span id="addPosText">Adicionar posi√ß√£o</span>
            </button>
            <button id="refreshBtn" class="btn">
              <span>üîÑ</span>
              <span id="refreshText">Atualizar pre√ßos</span>
            </button>
            <button id="clearAllBtn" class="btn ghost">
              <span>üóëÔ∏è</span>
              <span id="clearAllText">Limpar locais</span>
            </button>
            <button id="exportBtn" class="btn ghost">
              <span>üì•</span>
              <span id="exportText">Exportar CSV</span>
            </button>
          </div>
        </div>

        <p class="status mt-2" id="quoteStatus"></p>

        <!-- Positions table -->
        <div class="table-wrap mt-3">
          <table id="posTable" aria-label="Tabela de posi√ß√µes">
            <thead>
              <tr>
                <th id="thSymbol">S√≠mbolo</th>
                <th id="thAvg">Pre√ßo m√©dio</th>
                <th id="thLast">Pre√ßo atual</th>
                <th id="thPL">P/L %</th>
                <th id="thNote">Obs.</th>
                <th id="thActions">A√ß√µes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 16px; flex-wrap: wrap; gap: 12px;">
          <p id="totals" class="status"></p>
          <p id="lastRefresh" class="muted-small"></p>
        </div>
      </div>
    </div>

    <!-- TAB: CHARTS -->
    <div class="tab-content" data-content="charts">
      <div class="grid">
        <!-- TradingView chart -->
        <div class="card" style="grid-column: span 8; position: relative;">
          <div class="card-header">
            <div>
              <h2 id="chartTitle">Gr√°fico Avan√ßado</h2>
              <div class="card-subtitle" id="chartSubtitle">Powered by TradingView</div>
            </div>
          </div>

          <div class="input-group mt-2">
            <input 
              id="chartSymbolInput" 
              type="text"
              placeholder="Ex.: NASDAQ:NVDA ou BMFBOVESPA:PETR4" 
              aria-label="S√≠mbolo do gr√°fico"
            />
            <button id="setChartBtn" class="btn">
              <span id="loadChartText">Carregar</span>
            </button>
            <button id="addFromChartBtn" class="btn ghost">
              <span id="addFromChartText">‚ûï Adicionar</span>
            </button>
            <a 
              id="openTV" 
              class="btn ghost" 
              href="https://www.tradingview.com/chart/" 
              target="_blank" 
              rel="noopener"
            >
              <span id="openTVText">üîó TradingView</span>
            </a>
          </div>

          <div id="tradingview_chart" class="mt-2">
            <div class="chart-topbar" id="chartTopbar">
              <span id="chartSymbolPrefix">S√≠mbolo:</span> 
              <strong id="chartSymbolLabel">‚Äî</strong>
            </div>
            <div id="tv_container" style="height:100%;width:100%"></div>
          </div>

          <p class="status mt-2" id="tvStatus"></p>
        </div>

        <!-- Best practices -->
        <div class="card" style="grid-column: span 4;">
          <h3 id="practicesTitle">Boas Pr√°ticas</h3>
          <ul class="tips">
            <li id="practice1">Evite decis√µes com base em <span class="highlight">1 indicador</span> apenas</li>
            <li id="practice2">Observe a <span class="highlight">tend√™ncia (SMA50 x SMA200)</span></li>
            <li id="practice3">Entre com <span class="highlight">parcial</span> e complete se confirmar</li>
            <li id="practice4">Defina <span class="highlight">stop t√©cnico</span> e <span class="highlight">alvo</span></li>
            <li id="practice5">Revise not√≠cias/earnings relevantes</li>
          </ul>

          <h3 class="mt-3" id="checklistTitle">Checklist R√°pido</h3>
          <ul class="checklist">
            <li id="check1">Volume confirmando o movimento?</li>
            <li id="check2">Pre√ßo acima da m√©dia relevante?</li>
            <li id="check3">Risco/recompensa favor√°vel &lt; 1:2?</li>
          </ul>
        </div>
      </div>
    </div>

    <footer>
      <p>
        ¬© <span id="footerYear"></span> Stockgaide ‚Ä¢ 
        <span id="footerDisclaimer">Site educacional, n√£o √© recomenda√ß√£o de investimento</span> ‚Ä¢ 
        rafaelnm@gmail.com
      </p>
    </footer>
  </div>

  <!-- TradingView library -->
  <script src="https://s3.tradingview.com/tv.js"></script>

  <script>
  // ===================== CONFIG =====================
  const API_BASE = "https://shiny-sea-44d3.rafaelnm.workers.dev";
  const QUOTE_API = API_BASE + "/quotes";
  const POS_API   = API_BASE + "/positions";
  const AI_API    = API_BASE + "/analyze";

  // ===================== TOAST SYSTEM =====================
  function showToast(message, type = 'info', duration = 4000) {
    const container = document.getElementById('toastContainer');
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    
    const icons = {
      success: '‚úì',
      error: '‚úó',
      info: '‚Ñπ',
      warning: '‚ö†'
    };
    
    const titles = {
      pt: {
        success: 'Sucesso',
        error: 'Erro',
        info: 'Informa√ß√£o',
        warning: 'Aten√ß√£o'
      },
      en: {
        success: 'Success',
        error: 'Error',
        info: 'Information',
        warning: 'Warning'
      }
    };
    
    const lang = document.documentElement.lang === 'en' ? 'en' : 'pt';
    
    toast.innerHTML = `
      <div class="toast-icon">${icons[type]}</div>
      <div class="toast-content">
        <div class="toast-title">${titles[lang][type]}</div>
        <div class="toast-message">${message}</div>
      </div>
    `;
    
    container.appendChild(toast);
    
    setTimeout(() => {
      toast.classList.add('removing');
      setTimeout(() => toast.remove(), 300);
    }, duration);
  }

  // ===================== I18N =====================
  const I18N = {
    pt: {
      // Header
      headerSubtitle: 'An√°lise inteligente de a√ß√µes com IA',
      
      // Tabs
      tabDashboard: 'Dashboard',
      tabAnalysis: 'An√°lise',
      tabPortfolio: 'Portf√≥lio',
      tabCharts: 'Gr√°ficos',
      
      // Dashboard
      statPortfolioLabel: 'Portf√≥lio',
      statPositionsLabel: 'Posi√ß√µes',
      statWinnersLabel: 'Ganhadoras',
      statRiskLabel: 'Em Risco',
      quickTipsTitle: 'Dicas R√°pidas',
      quickTipsSubtitle: 'Resumo pr√°tico para uso di√°rio',
      lastReadLabel: '√öltima leitura:',
      tip1: 'üéØ Ganho esperado: <span class="highlight">+5%</span> (curto prazo) | <span class="highlight">+10%</span> (longo prazo)',
      tip2: '‚è∞ Alertas enviados: <span class="highlight">ap√≥s fechamento</span> de Wall Street',
      tip3: 'üõ°Ô∏è Sempre defina <span class="highlight">stop loss</span> antes de operar',
      tip4: 'üìà Confirme sinais com <span class="highlight">2-3 indicadores</span> t√©cnicos',
      methodologyTitle: 'Como Funciona',
      methodologySubtitle: 'Nossa metodologia de an√°lise',
      methodIndicators: 'Indicadores',
      methodAnalysts: 'Analistas',
      methodUpdate: 'Atualiza√ß√£o',
      methodUpdateValue: 'Tempo real',
      methodAccuracy: 'Precis√£o',
      marketTitle: 'Mercados Globais & Magnificent 7',
      marketSubtitle: 'Acompanhe √≠ndices e mega-cap tech',
      
      // Analysis
      heroTitle: 'An√°lise T√©cnica Automatizada',
      heroSubtitle: 'Combina√ß√£o de 15+ indicadores t√©cnicos + consenso de analistas',
      analyzeText: 'Analisar',
      useChartText: 'Usar s√≠mbolo do gr√°fico',
      analysisResultTitle: 'Resultado da An√°lise',
      analysisResultSubtitle: 'Calculado pelo nosso algoritmo propriet√°rio',
      emptyAnalysisTitle: 'Nenhuma an√°lise ainda',
      emptyAnalysisMessage: 'Digite um s√≠mbolo acima e clique em "Analisar"',
      grokTitle: 'Opini√£o Extra da IA (Grok)',
      grokSubtitle: 'Resumo conciso gerado pela LLM',
      alertsTitle: 'Alertas do Agente',
      alertsSubtitle: 'Sinais autom√°ticos do Worker (Cloudflare)',
      alertsHelp: 'Se a janela n√£o aparecer',
      alertsHelpText: 'No Worker: remova <code>X-Frame-Options</code> e permita <code>frame-ancestors</code> no CSP.',
      
      // Portfolio
      portfolioTitle: 'Meu Portf√≥lio',
      portfolioSubtitle: 'Gerencie suas posi√ß√µes com c√°lculo de P/L em tempo real',
      publicBadge: 'P√∫blico',
      loadPublicText: 'Carregar p√∫blicas',
      publishText: 'Publicar (admin)',
      addPositionTitle: 'Adicionar Nova Posi√ß√£o',
      addPosText: 'Adicionar posi√ß√£o',
      refreshText: 'Atualizar pre√ßos',
      clearAllText: 'Limpar locais',
      exportText: 'Exportar CSV',
      thSymbol: 'S√≠mbolo',
      thAvg: 'Pre√ßo m√©dio',
      thLast: 'Pre√ßo atual',
      thPL: 'P/L %',
      thNote: 'Obs.',
      thActions: 'A√ß√µes',
      editBtn: 'Editar',
      deleteBtn: 'Excluir',
      totals: 'Total de posi√ß√µes: {n}',
      
      // Charts
      chartTitle: 'Gr√°fico Avan√ßado',
      chartSubtitle: 'Powered by TradingView',
      loadChartText: 'Carregar',
      addFromChartText: '‚ûï Adicionar',
      openTVText: 'üîó TradingView',
      chartSymbolPrefix: 'S√≠mbolo:',
      practicesTitle: 'Boas Pr√°ticas',
      practice1: 'Evite decis√µes com base em <span class="highlight">1 indicador</span> apenas',
      practice2: 'Observe a <span class="highlight">tend√™ncia (SMA50 x SMA200)</span>',
      practice3: 'Entre com <span class="highlight">parcial</span> e complete se confirmar',
      practice4: 'Defina <span class="highlight">stop t√©cnico</span> e <span class="highlight">alvo</span>',
      practice5: 'Revise not√≠cias/earnings relevantes',
      checklistTitle: 'Checklist R√°pido',
      check1: 'Volume confirmando o movimento?',
      check2: 'Pre√ßo acima da m√©dia relevante?',
      check3: 'Risco/recompensa favor√°vel < 1:2?',
      
      // Footer
      footerDisclaimer: 'Site educacional, n√£o √© recomenda√ß√£o de investimento',
      
      // Disclaimer
      disclaimerText: 'Conte√∫do educacional. N√£o constitui recomenda√ß√£o de investimento. Consulte um profissional certificado.',
      
      // Messages
      analyzing: 'Analisando‚Ä¶',
      updating: 'Atualizando‚Ä¶',
      loading: 'Carregando‚Ä¶',
      noPositions: 'Nenhuma posi√ß√£o encontrada',
      fillSymbol: 'Preencha o s√≠mbolo',
      fillAvgPrice: 'Preencha o pre√ßo m√©dio',
      confirmClear: 'Limpar todas as posi√ß√µes LOCAIS?',
      success: 'Opera√ß√£o realizada com sucesso!',
      error: 'Erro ao processar',
      
      // AI specific
      ai_decision: 'Decis√£o',
      ai_score: 'Score',
      ai_reasons: 'Motivos',
      ai_technicals: 'T√©cnicos',
      ai_analysts: 'Analistas',
      ai_buy: 'Comprar',
      ai_hold: 'Manter',
      ai_sell: 'Vender'
    },
    en: {
      // Header
      headerSubtitle: 'Intelligent stock analysis with AI',
      
      // Tabs
      tabDashboard: 'Dashboard',
      tabAnalysis: 'Analysis',
      tabPortfolio: 'Portfolio',
      tabCharts: 'Charts',
      
      // Dashboard
      statPortfolioLabel: 'Portfolio',
      statPositionsLabel: 'Positions',
      statWinnersLabel: 'Winners',
      statRiskLabel: 'At Risk',
      quickTipsTitle: 'Quick Tips',
      quickTipsSubtitle: 'Practical summary for daily use',
      lastReadLabel: 'Last read:',
      tip1: 'üéØ Expected gain: <span class="highlight">+5%</span> (short term) | <span class="highlight">+10%</span> (long term)',
      tip2: '‚è∞ Alerts sent: <span class="highlight">after close</span> of Wall Street',
      tip3: 'üõ°Ô∏è Always set <span class="highlight">stop loss</span> before trading',
      tip4: 'üìà Confirm signals with <span class="highlight">2-3 indicators</span>',
      methodologyTitle: 'How It Works',
      methodologySubtitle: 'Our analysis methodology',
      methodIndicators: 'Indicators',
      methodAnalysts: 'Analysts',
      methodUpdate: 'Update',
      methodUpdateValue: 'Real-time',
      methodAccuracy: 'Accuracy',
      marketTitle: 'Global Markets & Magnificent 7',
      marketSubtitle: 'Track indices and mega-cap tech',
      
      // Analysis
      heroTitle: 'Automated Technical Analysis',
      heroSubtitle: 'Combination of 15+ technical indicators + analyst consensus',
      analyzeText: 'Analyze',
      useChartText: 'Use chart symbol',
      analysisResultTitle: 'Analysis Result',
      analysisResultSubtitle: 'Calculated by our proprietary algorithm',
      emptyAnalysisTitle: 'No analysis yet',
      emptyAnalysisMessage: 'Enter a symbol above and click "Analyze"',
      grokTitle: 'Extra AI Opinion (Grok)',
      grokSubtitle
